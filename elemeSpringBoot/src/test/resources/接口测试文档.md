# 饿了么外卖系统接口测试文档

## 概述
本文档基于Swagger JSON文件生成，包含饿了么外卖系统所有API接口的测试用例设计。

**系统信息：**
- 系统名称：饿了么系统接口文档
- 版本：v1.0.1
- 服务器地址：http://localhost:8080/api
- 许可证：MIT

---

## 1. 用户服务接口测试

### 1.1 用户登录接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /user/login` |
| **接口描述** | 用户登录验证 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"userPhone": "string", "password": "string"}` |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_LOGIN_001 | 正常登录 | `{"userPhone": "13812345678", "password": "Test123"}` | 200 OK，返回用户信息和token | 正向测试 |
| TC_LOGIN_002 | 手机号为空 | `{"userPhone": "", "password": "Test123"}` | 400 Bad Request，"手机号不能为空" | 边界值测试 |
| TC_LOGIN_003 | 密码为空 | `{"userPhone": "13812345678", "password": ""}` | 400 Bad Request，"密码不能为空" | 边界值测试 |
| TC_LOGIN_004 | 手机号格式错误 | `{"userPhone": "12345", "password": "Test123"}` | 400 Bad Request，"手机号格式错误" | 格式验证 |
| TC_LOGIN_005 | 密码错误 | `{"userPhone": "13812345678", "password": "wrong"}` | 401 Unauthorized，"用户名或密码错误" | 业务逻辑 |
| TC_LOGIN_006 | 用户不存在 | `{"userPhone": "19999999999", "password": "Test123"}` | 401 Unauthorized，"用户不存在" | 业务逻辑 |
| TC_LOGIN_007 | 参数缺失 | `{"userPhone": "13812345678"}` | 400 Bad Request，"缺少必要参数" | 参数验证 |
| TC_LOGIN_008 | 请求体为空 | `{}` | 400 Bad Request，"请求参数不能为空" | 异常测试 |

### 1.2 用户注册接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /user/register` |
| **接口描述** | 用户注册 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"userPhone": "string", "password": "string", "email": "string", "verifyCode": "string"}` |
| **响应类型** | Integer (1:成功, 0:用户已存在, -1:验证码错误) |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_REG_001 | 正常注册 | `{"userPhone": "13812345678", "password": "Test123", "email": "test@example.com", "verifyCode": "123456"}` | 200 OK，返回1 | 正向测试 |
| TC_REG_002 | 用户已存在 | `{"userPhone": "13812345678", "password": "Test123", "email": "test@example.com", "verifyCode": "123456"}` | 200 OK，返回0 | 业务逻辑 |
| TC_REG_003 | 验证码错误 | `{"userPhone": "13812345679", "password": "Test123", "email": "test@example.com", "verifyCode": "000000"}` | 200 OK，返回-1 | 业务逻辑 |
| TC_REG_004 | 手机号格式错误 | `{"userPhone": "12345", "password": "Test123", "email": "test@example.com", "verifyCode": "123456"}` | 400 Bad Request，"手机号格式错误" | 格式验证 |
| TC_REG_005 | 密码强度不够 | `{"userPhone": "13812345679", "password": "123", "email": "test@example.com", "verifyCode": "123456"}` | 400 Bad Request，"密码强度不够" | 格式验证 |
| TC_REG_006 | 邮箱格式错误 | `{"userPhone": "13812345679", "password": "Test123", "email": "invalid-email", "verifyCode": "123456"}` | 400 Bad Request，"邮箱格式错误" | 格式验证 |
| TC_REG_007 | 验证码为空 | `{"userPhone": "13812345679", "password": "Test123", "email": "test@example.com", "verifyCode": ""}` | 400 Bad Request，"验证码不能为空" | 边界值测试 |
| TC_REG_008 | 所有字段为空 | `{"userPhone": "", "password": "", "email": "", "verifyCode": ""}` | 400 Bad Request，"请求参数不能为空" | 边界值测试 |

### 1.3 发送验证码接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /user/sendVerifyCode` |
| **接口描述** | 发送邮箱验证码 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"email": "string"}` |
| **响应类型** | String |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_VERIFY_001 | 正常发送 | `{"email": "test@example.com"}` | 200 OK，"验证码已发送" | 正向测试 |
| TC_VERIFY_002 | 邮箱为空 | `{"email": ""}` | 400 Bad Request，"邮箱不能为空" | 边界值测试 |
| TC_VERIFY_003 | 邮箱格式错误 | `{"email": "invalid-email"}` | 400 Bad Request，"邮箱格式错误" | 格式验证 |
| TC_VERIFY_004 | 邮箱长度超限 | `{"email": "a".repeat(100) + "@example.com"}` | 400 Bad Request，"邮箱长度超出限制" | 边界值测试 |
| TC_VERIFY_005 | 请求体为空 | `{}` | 400 Bad Request，"请求参数不能为空" | 异常测试 |
| TC_VERIFY_006 | 频繁发送 | 连续多次发送同一邮箱 | 429 Too Many Requests，"发送过于频繁" | 限流测试 |
| TC_VERIFY_007 | 邮件服务异常 | `{"email": "test@example.com"}` | 500 Internal Server Error，"邮件发送失败" | 异常测试 |

---

## 2. 商品（食物）服务接口测试

### 2.1 根据ID获取商品接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /food/getFoodById` |
| **接口描述** | 根据商品ID获取商品详情 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"ID": integer}` |
| **响应类型** | Food对象 |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_FOOD_001 | 正常获取商品 | `{"ID": 1}` | 200 OK，返回商品详情 | 正向测试 |
| TC_FOOD_002 | 商品不存在 | `{"ID": 999999}` | 404 Not Found | 边界值测试 |
| TC_FOOD_003 | ID为0 | `{"ID": 0}` | 400 Bad Request，"ID无效" | 边界值测试 |
| TC_FOOD_004 | ID为负数 | `{"ID": -1}` | 400 Bad Request，"ID无效" | 边界值测试 |
| TC_FOOD_005 | ID为空 | `{}` | 400 Bad Request，"ID不能为空" | 参数验证 |
| TC_FOOD_006 | ID为最大值 | `{"ID": 2147483647}` | 404 Not Found 或 200 OK | 边界值测试 |
| TC_FOOD_007 | ID类型错误 | `{"ID": "abc"}` | 400 Bad Request，"ID类型错误" | 类型验证 |

### 2.2 批量获取商品接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /food/getAllByIds` |
| **接口描述** | 根据ID列表批量获取商品 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"ids": [integer]}` |
| **响应类型** | Food数组 |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_FOODS_001 | 正常批量获取 | `{"ids": [1, 2, 3]}` | 200 OK，返回商品数组 | 正向测试 |
| TC_FOODS_002 | 单个ID | `{"ids": [1]}` | 200 OK，返回单个商品数组 | 边界值测试 |
| TC_FOODS_003 | 空ID列表 | `{"ids": []}` | 200 OK，返回空数组 | 边界值测试 |
| TC_FOODS_004 | 包含不存在ID | `{"ids": [1, 999999, 3]}` | 200 OK，返回存在的商品 | 业务逻辑 |
| TC_FOODS_005 | 包含重复ID | `{"ids": [1, 1, 2, 2]}` | 200 OK，返回去重后的商品 | 业务逻辑 |
| TC_FOODS_006 | 包含负数ID | `{"ids": [1, -1, 3]}` | 200 OK，过滤无效ID | 数据过滤 |
| TC_FOODS_007 | 大量ID | `{"ids": [1,2,3...100]}` | 200 OK 或 413 Payload Too Large | 性能测试 |
| TC_FOODS_008 | IDs参数缺失 | `{}` | 400 Bad Request，"ids参数不能为空" | 参数验证 |

---

## 3. 商家服务接口测试

### 3.1 获取所有商家接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /business/getAll` |
| **接口描述** | 获取所有商家列表 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | 无 |
| **响应类型** | Business数组 |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_BIZ_ALL_001 | 正常获取商家列表 | 无 | 200 OK，返回商家数组 | 正向测试 |
| TC_BIZ_ALL_002 | 无商家数据 | 无 | 204 No Content | 边界值测试 |
| TC_BIZ_ALL_003 | 数据库连接异常 | 无 | 500 Internal Server Error | 异常测试 |
| TC_BIZ_ALL_004 | 大量商家数据 | 无 | 200 OK，返回完整列表 | 性能测试 |

### 3.2 根据ID获取商家接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /business/getBusinessById` |
| **接口描述** | 根据商家ID获取商家详情 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"ID": integer}` |
| **响应类型** | BusinessResponse对象 |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_BIZ_001 | 正常获取商家 | `{"ID": 1}` | 200 OK，`{success: true, data: 商家信息}` | 正向测试 |
| TC_BIZ_002 | 商家不存在 | `{"ID": 999999}` | 200 OK，`{success: false}` | 边界值测试 |
| TC_BIZ_003 | ID为0 | `{"ID": 0}` | 200 OK，`{success: false}` | 边界值测试 |
| TC_BIZ_004 | ID为负数 | `{"ID": -1}` | 200 OK，`{success: false}` | 边界值测试 |
| TC_BIZ_005 | ID为空 | `{}` | 200 OK，`{success: false}` | 参数验证 |
| TC_BIZ_006 | ID为最大值 | `{"ID": 2147483647}` | 200 OK，`{success: false}` | 边界值测试 |
| TC_BIZ_007 | ID类型错误 | `{"ID": "abc"}` | 400 Bad Request，"ID类型错误" | 类型验证 |

---

## 4. 购物车服务接口测试

### 4.1 添加商品到购物车接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /cart/add` |
| **接口描述** | 添加商品到购物车 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求头** | User-Phone: 用户手机号(可选) |
| **请求参数** | CartItem对象 |
| **响应类型** | Object |

#### CartItem对象结构
```json
{
  "userPhone": "string (pattern: ^1[3-9]\\d{9}$)",
  "foodId": "integer (min: 1)",
  "foodName": "string",
  "quantity": "integer (min: 1, max: 999)",
  "unitPrice": "number (min: 0.01, max: 9999.99)",
  "totalPrice": "number (min: 0.01, max: 999999.99)",
  "businessId": "integer (min: 1)",
  "businessName": "string",
  "remarks": "string"
}
```

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_ADD_001 | 正常添加商品 | 有效CartItem对象 | 200 OK，`{code: 200, message: "添加成功"}` | 正向测试 |
| TC_CART_ADD_002 | 商品信息无效 | `{foodId: -1, ...}` | 400 Bad Request，`{code: 400, message: "商品信息无效"}` | 业务逻辑 |
| TC_CART_ADD_003 | 用户信息无效 | `{userPhone: "12345", ...}` | 400 Bad Request，`{code: 400, message: "用户信息无效"}` | 格式验证 |
| TC_CART_ADD_004 | 数量超出限制 | `{quantity: 1000, ...}` | 400 Bad Request，`{code: 400, message: "商品数量超出限制(1-999)"}` | 边界值测试 |
| TC_CART_ADD_005 | 价格超出限制 | `{unitPrice: 10000, ...}` | 400 Bad Request，`{code: 400, message: "商品价格超出限制(0.01-9999.99)"}` | 边界值测试 |
| TC_CART_ADD_006 | 购物车已满 | 添加第51种商品 | 429 Too Many Requests，`{code: 429, message: "购物车商品种类已达上限(50种)"}` | 业务规则 |
| TC_CART_ADD_007 | 请求参数为空 | `null` | 400 Bad Request，`{code: 400, message: "请求参数不能为空"}` | 异常测试 |
| TC_CART_ADD_008 | 手机号边界值 | `{userPhone: "13000000000", ...}` | 200 OK 或 400 Bad Request | 边界值测试 |
| TC_CART_ADD_009 | 价格边界值 | `{unitPrice: 0.01, ...}` | 200 OK | 边界值测试 |
| TC_CART_ADD_010 | 数量边界值 | `{quantity: 1, ...}` | 200 OK | 边界值测试 |

### 4.2 更新购物车商品数量接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `PUT /cart/update/{itemId}` |
| **接口描述** | 更新购物车商品数量 |
| **请求方式** | PUT |
| **路径参数** | itemId: 购物车项目ID (Long) |
| **查询参数** | quantity: 新数量 (Integer) |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_UPD_001 | 正常更新数量 | `itemId=1, quantity=5` | 200 OK，`{code: 200, message: "更新成功"}` | 正向测试 |
| TC_CART_UPD_002 | 商品ID无效 | `itemId=0, quantity=5` | 400 Bad Request，`{code: 400, message: "商品ID无效"}` | 边界值测试 |
| TC_CART_UPD_003 | 数量无效 | `itemId=1, quantity=1000` | 400 Bad Request，`{code: 400, message: "数量无效(1-999)"}` | 边界值测试 |
| TC_CART_UPD_004 | 商品不存在 | `itemId=999999, quantity=5` | 404 Not Found，`{code: 404, message: "商品不存在"}` | 业务逻辑 |
| TC_CART_UPD_005 | 商品已失效 | `itemId=1, quantity=5` | 410 Gone，`{code: 410, message: "商品已失效"}` | 业务逻辑 |
| TC_CART_UPD_006 | 数量为空 | `itemId=1` | 400 Bad Request | 参数验证 |
| TC_CART_UPD_007 | 负数ID | `itemId=-1, quantity=5` | 400 Bad Request，`{code: 400, message: "商品ID无效"}` | 边界值测试 |
| TC_CART_UPD_008 | 数量边界值 | `itemId=1, quantity=1` | 200 OK | 边界值测试 |
| TC_CART_UPD_009 | 数量边界值 | `itemId=1, quantity=999` | 200 OK | 边界值测试 |

### 4.3 获取购物车列表接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `GET /cart/list` |
| **接口描述** | 获取用户购物车列表 |
| **请求方式** | GET |
| **查询参数** | userPhone: 用户手机号, page: 页码(默认1), size: 每页大小(默认10) |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_LIST_001 | 正常获取列表 | `userPhone=13812345678&page=1&size=10` | 200 OK，返回购物车列表 | 正向测试 |
| TC_CART_LIST_002 | 使用默认分页 | `userPhone=13812345678` | 200 OK，使用默认page=1,size=10 | 默认值测试 |
| TC_CART_LIST_003 | 手机号无效 | `userPhone=invalid&page=1&size=10` | 400 Bad Request，`{code: 400, message: "用户手机号无效"}` | 格式验证 |
| TC_CART_LIST_004 | 空购物车 | `userPhone=13812345678` | 200 OK，返回空列表 | 边界值测试 |
| TC_CART_LIST_005 | 页码为0 | `userPhone=13812345678&page=0` | 400 Bad Request | 边界值测试 |
| TC_CART_LIST_006 | 页面大小超限 | `userPhone=13812345678&size=1000` | 400 Bad Request 或 200 OK | 边界值测试 |
| TC_CART_LIST_007 | 手机号为空 | `userPhone=` | 400 Bad Request | 参数验证 |

### 4.4 删除购物车商品接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `DELETE /cart/remove/{itemId}` |
| **接口描述** | 删除购物车商品 |
| **请求方式** | DELETE |
| **路径参数** | itemId: 购物车项目ID (Long) |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_DEL_001 | 正常删除商品 | `itemId=1` | 200 OK，`{code: 200, message: "删除成功"}` | 正向测试 |
| TC_CART_DEL_002 | 商品不存在 | `itemId=999999` | 404 Not Found，`{code: 404, message: "商品不存在"}` | 业务逻辑 |
| TC_CART_DEL_003 | 无效商品ID | `itemId=0` | 400 Bad Request，`{code: 400, message: "商品ID无效"}` | 边界值测试 |
| TC_CART_DEL_004 | 负数ID | `itemId=-1` | 400 Bad Request，`{code: 400, message: "商品ID无效"}` | 边界值测试 |

### 4.5 清空购物车接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `DELETE /cart/clear` |
| **接口描述** | 清空用户购物车 |
| **请求方式** | DELETE |
| **查询参数** | userPhone: 用户手机号 |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_CLR_001 | 正常清空购物车 | `userPhone=13812345678` | 200 OK，`{code: 200, message: "清空成功"}` | 正向测试 |
| TC_CART_CLR_002 | 用户不存在 | `userPhone=19999999999` | 404 Not Found，`{code: 404, message: "用户不存在"}` | 业务逻辑 |
| TC_CART_CLR_003 | 手机号格式错误 | `userPhone=invalid` | 400 Bad Request | 格式验证 |
| TC_CART_CLR_004 | 手机号为空 | `userPhone=` | 400 Bad Request | 参数验证 |

### 4.6 购物车验证接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `GET /cart/validate` |
| **接口描述** | 验证购物车是否可以结算 |
| **请求方式** | GET |
| **查询参数** | userPhone: 用户手机号 |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_VAL_001 | 购物车验证通过 | `userPhone=13812345678` | 200 OK，`{code: 200, message: "购物车验证通过"}` | 正向测试 |
| TC_CART_VAL_002 | 购物车为空 | `userPhone=13812345678` | 400 Bad Request，`{code: 400, message: "购物车为空"}` | 业务逻辑 |
| TC_CART_VAL_003 | 包含失效商品 | `userPhone=13812345678` | 400 Bad Request，`{code: 400, message: "购物车包含失效商品"}` | 业务逻辑 |
| TC_CART_VAL_004 | 手机号无效 | `userPhone=invalid` | 400 Bad Request | 格式验证 |

### 4.7 购物车统计信息接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `GET /cart/statistics` |
| **接口描述** | 获取购物车统计信息 |
| **请求方式** | GET |
| **查询参数** | userPhone: 用户手机号 |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_STAT_001 | 正常获取统计 | `userPhone=13812345678` | 200 OK，返回统计信息 | 正向测试 |
| TC_CART_STAT_002 | 空购物车统计 | `userPhone=13812345678` | 200 OK，返回零值统计 | 边界值测试 |
| TC_CART_STAT_003 | 手机号无效 | `userPhone=invalid` | 400 Bad Request | 格式验证 |

### 4.8 批量操作购物车接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /cart/batch` |
| **接口描述** | 批量操作购物车商品 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | Object (批量操作参数) |
| **响应类型** | Object |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CART_BATCH_001 | 正常批量操作 | 有效批量操作参数 | 200 OK，返回操作结果 | 正向测试 |
| TC_CART_BATCH_002 | 空操作列表 | `{}` | 400 Bad Request | 边界值测试 |
| TC_CART_BATCH_003 | 包含无效操作 | 包含无效项目的批量操作 | 200 OK，返回部分成功结果 | 业务逻辑 |

---

## 5. 订单服务接口测试

### 5.1 根据ID获取用户订单接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /order/getUserOrderById` |
| **接口描述** | 根据订单ID获取用户订单详情 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"ID": integer}` |
| **响应类型** | UserOrder对象 |

#### UserOrder对象结构
```json
{
  "id": "integer",
  "businessID": "integer",
  "userPhone": "string",
  "orderList": "string",
  "price": "number",
  "state": "integer",
  "createdAt": "string (date-time)"
}
```

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_ORDER_001 | 正常获取订单 | `{"ID": 1}` | 200 OK，返回订单详情 | 正向测试 |
| TC_ORDER_002 | 订单不存在 | `{"ID": 999999}` | 404 Not Found | 边界值测试 |
| TC_ORDER_003 | ID为0 | `{"ID": 0}` | 400 Bad Request，"ID无效" | 边界值测试 |
| TC_ORDER_004 | ID为负数 | `{"ID": -1}` | 400 Bad Request，"ID无效" | 边界值测试 |
| TC_ORDER_005 | ID为空 | `{}` | 400 Bad Request，"ID不能为空" | 参数验证 |
| TC_ORDER_006 | ID为最大值 | `{"ID": 2147483647}` | 404 Not Found 或 200 OK | 边界值测试 |

### 5.2 添加用户订单接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /order/addUserOrder` |
| **接口描述** | 创建新的用户订单 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | OrderRequestDTO对象 |
| **响应类型** | Integer (订单ID) |

#### OrderRequestDTO对象结构
```json
{
  "businessID": "integer",
  "userPhone": "string",
  "orderList": ["integer"],
  "price": "number"
}
```

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_ORDER_ADD_001 | 正常创建订单 | 有效OrderRequestDTO | 200 OK，返回订单ID | 正向测试 |
| TC_ORDER_ADD_002 | 创建失败 | 无效数据 | 200 OK，返回0 | 业务逻辑 |
| TC_ORDER_ADD_003 | 商家ID无效 | `{businessID: -1, ...}` | 400 Bad Request | 参数验证 |
| TC_ORDER_ADD_004 | 手机号格式错误 | `{userPhone: "invalid", ...}` | 400 Bad Request | 格式验证 |
| TC_ORDER_ADD_005 | 订单列表为空 | `{orderList: [], ...}` | 400 Bad Request | 业务逻辑 |
| TC_ORDER_ADD_006 | 价格为负数 | `{price: -1, ...}` | 400 Bad Request | 边界值测试 |
| TC_ORDER_ADD_007 | 价格为0 | `{price: 0, ...}` | 400 Bad Request | 边界值测试 |
| TC_ORDER_ADD_008 | 请求体为空 | `{}` | 200 OK，返回0 | 异常测试 |

### 5.3 查询订单支付状态接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /order/havePayed` |
| **接口描述** | 查询订单是否已支付 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"ID": integer}` |
| **响应类型** | Boolean |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_PAY_001 | 订单已支付 | `{"ID": 1}` | 200 OK，返回true | 正向测试 |
| TC_PAY_002 | 订单未支付 | `{"ID": 2}` | 200 OK，返回false | 正向测试 |
| TC_PAY_003 | 订单不存在 | `{"ID": 999999}` | 200 OK，返回false | 业务逻辑 |
| TC_PAY_004 | ID为空 | `{}` | 200 OK，返回false | 参数验证 |
| TC_PAY_005 | ID为负数 | `{"ID": -1}` | 200 OK，返回false | 边界值测试 |

### 5.4 获取用户所有订单接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /order/getAllUserOrder` |
| **接口描述** | 获取用户的所有订单列表 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"userPhone": "string"}` |
| **响应类型** | UserOrder数组 |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_ORDER_LIST_001 | 正常获取订单列表 | `{"userPhone": "13812345678"}` | 200 OK，返回订单数组 | 正向测试 |
| TC_ORDER_LIST_002 | 用户无订单 | `{"userPhone": "13812345679"}` | 200 OK，返回空数组 | 边界值测试 |
| TC_ORDER_LIST_003 | 手机号格式错误 | `{"userPhone": "invalid"}` | 200 OK，返回空数组 | 格式验证 |
| TC_ORDER_LIST_004 | 手机号为空 | `{"userPhone": ""}` | 200 OK，返回空数组 | 边界值测试 |
| TC_ORDER_LIST_005 | 参数缺失 | `{}` | 200 OK，返回空数组 | 参数验证 |

### 5.5 获取订单详情接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /order/getOrderDetail` |
| **接口描述** | 获取订单的详细信息 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | `{"ID": integer}` |
| **响应类型** | OrderDetailDTO对象 |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_ORDER_DETAIL_001 | 正常获取订单详情 | `{"ID": 1}` | 200 OK，返回订单详情 | 正向测试 |
| TC_ORDER_DETAIL_002 | 订单不存在 | `{"ID": 999999}` | 204 No Content | 边界值测试 |
| TC_ORDER_DETAIL_003 | ID为空 | `{}` | 400 Bad Request，"ID不能为空" | 参数验证 |
| TC_ORDER_DETAIL_004 | ID为负数 | `{"ID": -1}` | 204 No Content | 边界值测试 |

### 5.6 获取订单时间接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `GET /order/getOrderTime/{id}` |
| **接口描述** | 获取订单的创建时间 |
| **请求方式** | GET |
| **路径参数** | id: 订单ID (Integer) |
| **响应类型** | String (date-time) |

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_ORDER_TIME_001 | 正常获取订单时间 | `id=1` | 200 OK，返回时间字符串 | 正向测试 |
| TC_ORDER_TIME_002 | 订单不存在 | `id=999999` | 404 Not Found | 边界值测试 |
| TC_ORDER_TIME_003 | ID为0 | `id=0` | 404 Not Found | 边界值测试 |
| TC_ORDER_TIME_004 | ID为负数 | `id=-1` | 404 Not Found | 边界值测试 |
| TC_ORDER_TIME_005 | ID为最大值 | `id=2147483647` | 404 Not Found | 边界值测试 |

---

## 6. 验证码服务接口测试

### 6.1 获取验证码接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `GET /captcha` |
| **接口描述** | 获取图形验证码 |
| **请求方式** | GET |
| **请求参数** | 无 |
| **响应类型** | CaptchaVO对象 |

#### CaptchaVO对象结构
```json
{
  "id": "string (UUID)",
  "imageBase64": "string (Base64编码的图片)"
}
```

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CAPTCHA_GET_001 | 正常获取验证码 | 无 | 200 OK，返回验证码信息 | 正向测试 |
| TC_CAPTCHA_GET_002 | 连续获取验证码 | 连续多次请求 | 200 OK，每次返回不同验证码 | 业务逻辑 |
| TC_CAPTCHA_GET_003 | 验证码ID格式 | 无 | 200 OK，ID为有效UUID格式 | 格式验证 |
| TC_CAPTCHA_GET_004 | 图片Base64格式 | 无 | 200 OK，imageBase64为有效Base64 | 格式验证 |

### 6.2 验证验证码接口

| 测试项目 | 详细信息 |
|---------|---------|
| **接口路径** | `POST /captcha` |
| **接口描述** | 验证用户输入的验证码 |
| **请求方式** | POST |
| **Content-Type** | application/json |
| **请求参数** | CaptchaRO对象 |
| **响应类型** | Boolean |

#### CaptchaRO对象结构
```json
{
  "id": "string (UUID)",
  "value": "string (验证码值)"
}
```

#### 测试用例设计

| 用例编号 | 测试场景 | 输入数据 | 预期结果 | 测试类型 |
|---------|---------|---------|---------|---------|
| TC_CAPTCHA_VAL_001 | 验证码正确 | `{"id": "valid-uuid", "value": "correct"}` | 200 OK，返回true | 正向测试 |
| TC_CAPTCHA_VAL_002 | 验证码错误 | `{"id": "valid-uuid", "value": "wrong"}` | 200 OK，返回false | 正向测试 |
| TC_CAPTCHA_VAL_003 | 验证码ID不存在 | `{"id": "invalid-uuid", "value": "any"}` | 200 OK，返回false | 业务逻辑 |
| TC_CAPTCHA_VAL_004 | 验证码为空 | `{"id": "valid-uuid", "value": ""}` | 400 Bad Request，"验证码不能为空" | 参数验证 |
| TC_CAPTCHA_VAL_005 | ID为空 | `{"id": "", "value": "1234"}` | 400 Bad Request，"验证码ID无效" | 参数验证 |
| TC_CAPTCHA_VAL_006 | 请求体为空 | `{}` | 400 Bad Request，"请求参数不能为空" | 异常测试 |
| TC_CAPTCHA_VAL_007 | ID格式错误 | `{"id": "invalid-format", "value": "1234"}` | 400 Bad Request，"验证码ID格式错误" | 格式验证 |
| TC_CAPTCHA_VAL_008 | 验证码过期 | 过期的验证码ID | 200 OK，返回false | 业务逻辑 |
| TC_CAPTCHA_VAL_009 | 验证码已使用 | 已验证过的验证码 | 200 OK，返回false | 业务逻辑 |

---

## 7. 接口测试总结

### 7.1 测试覆盖统计

| 服务模块 | 接口数量 | 测试用例数量 | 覆盖的测试类型 |
|---------|---------|-------------|---------------|
| 用户服务 | 3 | 23 | 正向测试、边界值测试、格式验证、业务逻辑、异常测试、限流测试 |
| 商品服务 | 2 | 15 | 正向测试、边界值测试、业务逻辑、性能测试、参数验证、类型验证 |
| 商家服务 | 2 | 11 | 正向测试、边界值测试、异常测试、性能测试、类型验证 |
| 购物车服务 | 8 | 42 | 正向测试、边界值测试、业务逻辑、格式验证、参数验证、异常测试 |
| 订单服务 | 6 | 30 | 正向测试、边界值测试、业务逻辑、格式验证、参数验证、异常测试 |
| 验证码服务 | 2 | 13 | 正向测试、业务逻辑、格式验证、参数验证、异常测试 |
| **总计** | **23** | **134** | **全面覆盖各种测试场景** |

### 7.2 测试类型分布

| 测试类型 | 用例数量 | 占比 | 说明 |
|---------|---------|------|------|
| 正向测试 | 23 | 17.2% | 验证正常业务流程 |
| 边界值测试 | 45 | 33.6% | 验证输入边界条件 |
| 业务逻辑测试 | 28 | 20.9% | 验证业务规则 |
| 格式验证测试 | 18 | 13.4% | 验证数据格式 |
| 参数验证测试 | 12 | 9.0% | 验证参数完整性 |
| 异常测试 | 6 | 4.5% | 验证异常处理 |
| 性能测试 | 2 | 1.5% | 验证性能表现 |

### 7.3 关键测试要点

#### 数据验证重点
- **手机号格式**：严格验证11位手机号格式 `^1[3-9]\\d{9}$`
- **价格范围**：商品价格 0.01-9999.99，总价格 0.01-999999.99
- **数量限制**：商品数量 1-999
- **ID有效性**：所有ID必须为正整数

#### 业务规则验证
- **购物车限制**：最多50种不同商品
- **验证码机制**：邮箱验证码发送和验证
- **订单状态**：支付状态查询和更新
- **用户权限**：用户只能操作自己的数据

#### 异常处理验证
- **参数缺失**：必要参数为空的处理
- **格式错误**：数据格式不正确的处理
- **业务异常**：违反业务规则的处理
- **系统异常**：服务器内部错误的处理

### 7.4 测试执行建议

#### 测试环境准备
1. **数据库准备**：准备测试数据，包括用户、商品、商家、订单等
2. **邮件服务**：配置测试邮件服务器或使用Mock
3. **验证码服务**：确保验证码生成和验证功能正常

#### 测试执行顺序
1. **基础数据测试**：用户、商品、商家信息查询
2. **业务流程测试**：注册→登录→浏览商品→加购物车→下单→支付
3. **边界值测试**：各种边界条件和异常情况
4. **性能测试**：高并发和大数据量测试

#### 测试数据管理
- **正向测试数据**：有效的用户、商品、订单数据
- **边界值数据**：最大值、最小值、临界值数据
- **异常数据**：无效格式、超出范围、空值数据
- **业务场景数据**：复杂业务流程的组合数据

通过这套完整的接口测试文档，可以确保饿了么外卖系统所有API接口的质量和稳定性。 